var winston = require('winston');
var conf = require('../conf/config.js');


var Logger = function(){

	var _getDate = function(){
	
		var _month_names = new Array ( );
			_month_names[_month_names.length] = "January";
			_month_names[_month_names.length] = "February";
			_month_names[_month_names.length] = "March";
			_month_names[_month_names.length] = "April";
			_month_names[_month_names.length] = "May";
			_month_names[_month_names.length] = "June";
			_month_names[_month_names.length] = "July";
			_month_names[_month_names.length] = "August";
			_month_names[_month_names.length] = "September";
			_month_names[_month_names.length] = "October";
			_month_names[_month_names.length] = "November";
			_month_names[_month_names.length] = "December";
			
		var _d = new Date();
	    var curr_date = _d.getDate();
	    var curr_month = _d.getMonth() + 1; //Months are zero based
	    var hour = _d.getHours();
	    var hour = _d.getMinutes();
	    var hour = _d.getSeconds();
	    
	    return curr_date + "-" + curr_month;
	};

	var default_ = {
			console: {
				level:"info", 
				colorize: 'true', 
				timestamp: _getDate
			},
			file: {
				filename:"../../log/server.log", 
				level:"debug"
			}
	};
	
	var logging  = conf.logging || default_ ;
	
	return new winston.Logger({
	    transports: [
	      new (winston.transports.Console)(logging.console),
	      new (winston.transports.File)(logging.file)
	    ]
	});
}

exports.Logger = Logger;